<% if current_user&.has_music_love?(music) %>
  <i class="fas fa-heart clickable" onclick="music_love_delete(<%= music.id %>, '<%= sort_condition %>')" style="color: red;"></i>
<% else %>
  <i class="far fa-heart clickable" onclick="music_love(<%= music.id %>, '<%= sort_condition %>')"></i>
<% end %>
&nbsp;<%= UserMusic.love.where(music: music).count %>

<script>
  function music_love(music, sort_condition) {
    $.ajax({
      url: '/user_musics/',
      type: 'POST',
      data: {
        music: music,
        sort_condition: sort_condition
      }
    });
  }

  function music_love_delete(music, sort_condition) {
    $.ajax({
      url: '/user_musics/' + music,
      type: 'DELETE',
      data: {
        sort_condition: sort_condition
      }
    });
  }
</script>
